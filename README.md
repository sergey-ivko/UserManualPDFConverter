Класс pdf_converter представляет собой специализированный инструмент для обработки технической документации (руководств пользователя, администратора, технических руководст, инструкций и т.д.) и преобразования их в структурированные документы для использования с LlamaIndex.

Основные возможности:
 - Очистка текста: Удаление технических артефактов (ссылки на рисунки, таблицы, оглавления)
 - Извлечение таблиц: Распознавание и структурированное извлечение таблиц с метаданными
 - Разделение на разделы: Автоматическое разделение документа на логические разделы
 - Извлечение метаданных: Получение информации о документе (название, автор, даты) и структуре содержимого
 - Определение языка: Автоматическое определение языка документа
 - Извлечение аннотации: Получение аннотации/резюме документа

Использование
Базовый пример
from user_manual_pdf_converter import pdf_converter

# Инициализация конвертера
reader = pdf_converter(
    include_tables=True,
    include_metadata=True,
)

# Загрузка PDF файла
documents = reader.load_data("техническое_руководство.pdf")

Структура результата
Метод load_data() возвращает список объектов Document:
1. Корневой документ: Содержит метаданные всего PDF файла
 - Тип: "root_doc"
 - Включает: название, автора, дату изменения, язык, тип документа, аннотацию
2. Разделы документа: Каждый представляет логический раздел документа
 - Тип: "section"
 - Включает: иерархическую структуру, диапазон страниц, таблицы, координаты областей

Дополнительные параметры

reader = pdf_converter(
    include_tables=True,          # Извлекать таблицы (по умолчанию: True)
    include_metadata=True,        # Включать метаданные (по умолчанию: True)
    default_top_margin=50,        # Верхний отступ для контента (в пунктах)
    default_bottom_margin=60,     # Нижний отступ для контента
    table_settings={...},         # Настройки извлечения таблиц
    default_log_dir="logs"        # Директория для логов
)

Примеры использования
Обработка руководства администратора

from user_manual_pdf_converter import pdf_converter

reader = pdf_converter()
documents = reader.load_data("руководство_администратора.pdf")

# Доступ к метаданным документа
root_doc = documents[0]
print(f"Название документа: {root_doc.metadata['title']}")
print(f"Тип документа: {root_doc.metadata['document_type']}")
print(f"Аннотация: {root_doc.metadata['annotation']}")

# Доступ к разделам
for section in documents[1:]:
    print(f"\nРаздел {'.'.join(section.metadata['hierarchy']}: {section.metadata['title']}")
    print(f"Страницы: {section.metadata['start_page']}-{section.metadata['end_page']}")
    print(section.text[:200] + "...")  # Печать первых 200 символов

Настройка извлечения таблиц

custom_settings = {
    "vertical_strategy": "text",
    "horizontal_strategy": "text",
    "intersection_y_tolerance": 10,
    "text_x_tolerance": 5,
    "text_y_tolerance": 5,
    "join_tolerance": 5
}

reader = pdf_converter(table_settings=custom_settings)
documents = reader.load_data("документ_с_таблицами.pdf")

Особенности работы
1. Автоматическое определение структуры:
 - Разделы определяются по нумерации заголовков (например, "1.2.3 Название раздела")
 - Сохраняется иерархическая связь между разделами
2. Обработка таблиц:
 - таблицы извлекаются с сохранением структуры
 - Определяются названия таблиц
 - Таблицы привязываются к соответствующим разделам
3. Метаданные:
 - Автоматически извлекается информация о документе
 - Определяется тип документа (руководство пользователя, администратора и т.д.)
 - Извлекается аннотация со второй страницы
4. Очистка текста:
 - Удаляются номера страниц, колонтитулы
 - Фильтруются ссылки на рисунки и таблицы
 - Нормализуются маркеры списков

Рекомендации по использованию
1. Для технических руководств рекомендуется включать извлечение таблиц (include_tables=True)
2. При обработке документов с нестандартной структурой может потребоваться настройка параметров default_top_margin и default_bottom_margin

Логи работы сохраняются в указанную директорию (по умолчанию "logs")


